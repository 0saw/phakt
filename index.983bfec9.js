const t=(t,e,n)=>Math.min(n,Math.max(e,t)),e=(e,n,o)=>{const a=parseFloat(e.dataset.offsetX??"0"),i=parseFloat(e.dataset.offsetY??"0");e.style.transform=`translate(\n    ${t(n-a,0,window.innerWidth-e.clientWidth)}px, \n    ${t(o-i,0,window.innerHeight-e.clientHeight)}px\n  )`},n=(t,e,n,o,a,i,r)=>{const s=document.createElement("div");return s.dataset.piece="true",s.hidden=!0,s.style.cssText=`\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: ${e}px;\n    height: ${n}px;\n    background-image: url(${t});\n    background-position: ${-e*i}px ${-n*r}px;\n    background-size: ${100*o}% ${100*a}%;\n    transform: translate(0, 0);\n    user-select: none;\n  `,s};let o=!1;const a=(t,e,n,o)=>((t-n)**2+(e-o)**2)**.5,i=(t,e,n)=>{const o=t.getBoundingClientRect();return e>=o.left&&e<=o.right&&n>=o.top&&n<=o.bottom},r=document.querySelector(".game"),s=document.querySelector(".game__area"),d=document.querySelector(".game__bag");let l=1;if(null===r||null===s||null===d)throw Error("No game area found");s.style.width="360px",s.style.height="200px";const h=new Array;for(let t=0;t<2;t++)for(let e=0;e<3;e++){const o=n("https://picsum.photos/360/200",120,100,3,2,e,t);h.push(o),r.append(o)}const c=t=>{d.classList.toggle("game__bag--active",i(d,t.x,t.y)),t.target instanceof HTMLDivElement&&"piece"in t.target.dataset&&e(t.target,t.x,t.y)},g=t=>{if(r.removeEventListener("pointermove",c),r.removeEventListener("pointerup",g),d.classList.remove("game__bag--active"),!(t.target instanceof HTMLDivElement&&"piece"in t.target.dataset))return;const n=t.target;n.dataset.offsetX="0",n.dataset.offsetY="0",i(d,t.x,t.y)&&(n.hidden=!0);const l=s.getBoundingClientRect(),p=n.getBoundingClientRect(),f=p.left-l.left+p.width/2,u=p.top-l.top+p.height/2,m=Math.round(l.width/p.width),v=Math.round(l.height/p.height),w=Math.floor(f/l.width*m),x=Math.floor(u/l.height*v);var y;w>=0&&w<m&&x>=0&&x<v&&a(w*p.width+p.width/2,x*p.height+p.height/2,f,u)<.15*a(p.left,p.top,p.right,p.bottom)&&(n.dataset.correct=h[x*m+w]===n?"true":"false",e(n,l.left+w*p.width,l.top+x*p.height),y=h,!o&&y.every((t=>"true"===t.dataset.correct))&&(o=!0,alert("Pobeda")))};r.addEventListener("pointerdown",(t=>{let n,o=t.offsetX,a=t.offsetY;if(i(d,t.x,t.y)){const t=h.filter((t=>t.hidden)).sort((()=>Math.random()-.5)).pop();void 0!==t&&(n=t,o=t.clientWidth/2,a=t.clientHeight/2)}else t.target instanceof HTMLDivElement&&"piece"in t.target.dataset&&(n=t.target);void 0!==n&&(n.hidden=!1,n.dataset.offsetX=`${o}`,n.dataset.offsetY=`${a}`,n.style.zIndex=""+l++,n.setPointerCapture(t.pointerId),e(n,t.x,t.y),r.addEventListener("pointermove",c),r.addEventListener("pointerup",g))}));
//# sourceMappingURL=index.983bfec9.js.map
