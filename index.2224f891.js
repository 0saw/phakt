!function(){const t=(t,e,n)=>Math.min(n,Math.max(e,t)),e=(e,n,o)=>{const i=parseFloat(e.dataset.offsetX??"0"),a=parseFloat(e.dataset.offsetY??"0");e.style.transform=`translate(\n    ${t(n-i,0,window.innerWidth-e.clientWidth)-window.innerWidth/2+window.scrollX}px, \n    ${t(o-a,0,window.innerHeight-e.clientHeight)-window.innerHeight/2+window.scrollY}px\n  )`},n=(t,e,n,o,i,a,r)=>{const s=document.createElement("div");return s.dataset.piece="true",s.hidden=!0,s.style.cssText=`\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: ${e}px;\n    height: ${n}px;\n    background-image: url(${t});\n    background-position: ${-e*a}px ${-n*r}px;\n    background-size: ${100*o}% ${100*i}%;\n    transform: translate(0, 0);\n    user-select: none;\n  `,s};let o=!1;const i=(t,e,n,o)=>((t-n)**2+(e-o)**2)**.5,a=(t,e,n)=>{const o=t.getBoundingClientRect();return e>=o.left&&e<=o.right&&n>=o.top&&n<=o.bottom},r=document.querySelector(".game"),s=document.querySelector(".game__area"),d=document.querySelector(".game__bag");let l=1;if(null===r||null===s||null===d)throw Error("No game area found");s.style.width="360px",s.style.height="200px";const c=new Array;for(let t=0;t<2;t++)for(let e=0;e<3;e++){const o=n("https://picsum.photos/360/200",120,100,3,2,e,t);c.push(o),r.append(o)}const h=t=>{d.classList.toggle("game__bag--active",a(d,t.x,t.y)),t.target instanceof HTMLDivElement&&"piece"in t.target.dataset&&e(t.target,t.x,t.y)},g=t=>{if(r.removeEventListener("pointermove",h),r.removeEventListener("pointerup",g),d.classList.remove("game__bag--active"),!(t.target instanceof HTMLDivElement&&"piece"in t.target.dataset))return;const n=t.target;n.dataset.offsetX="0",n.dataset.offsetY="0",a(d,t.x,t.y)&&(n.hidden=!0);const l=s.getBoundingClientRect(),f=n.getBoundingClientRect(),p=f.left-l.left+f.width/2,u=f.top-l.top+f.height/2,m=Math.round(l.width/f.width),w=Math.round(l.height/f.height),v=Math.floor(p/l.width*m),x=Math.floor(u/l.height*w);var y;v>=0&&v<m&&x>=0&&x<w&&i(v*f.width+f.width/2,x*f.height+f.height/2,p,u)<.15*i(f.left,f.top,f.right,f.bottom)?(n.dataset.correct=c[x*m+v]===n?"true":"false",e(n,l.left+v*f.width,l.top+x*f.height),y=c,!o&&y.every((t=>"true"===t.dataset.correct))&&(o=!0,alert("Pobeda"))):n.dataset.correct="false"};r.addEventListener("pointerdown",(t=>{let n,o=t.offsetX,i=t.offsetY;if(t.target instanceof HTMLDivElement&&"piece"in t.target.dataset)n=t.target;else if(a(d,t.x,t.y)){const t=c.filter((t=>t.hidden)).sort((()=>Math.random()-.5)).pop();void 0!==t&&(n=t,o=t.clientWidth/2,i=t.clientHeight/2)}void 0!==n&&(n.hidden=!1,n.dataset.offsetX=`${o}`,n.dataset.offsetY=`${i}`,n.style.zIndex=""+l++,n.setPointerCapture(t.pointerId),e(n,t.x,t.y),r.addEventListener("pointermove",h),r.addEventListener("pointerup",g))}))}();
//# sourceMappingURL=index.2224f891.js.map
