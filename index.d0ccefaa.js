const t=(t,e,n)=>Math.min(n,Math.max(e,t)),e=(e,n,o)=>{const i=parseFloat(e.dataset.offsetX??"0"),a=parseFloat(e.dataset.offsetY??"0");e.style.transform=`translate(\n    ${t(n-i,0,window.innerWidth-e.clientWidth)-window.innerWidth/2}px, \n    ${t(o-a,0,window.innerHeight-e.clientHeight)-window.innerHeight/2}px\n  )`},n=(t,e,n,o,i,a,r)=>{const s=document.createElement("div");return s.dataset.piece="true",s.hidden=!0,s.style.cssText=`\n    position: absolute;\n    top: 50vh;\n    left: 50vw;\n    width: ${e}px;\n    height: ${n}px;\n    background-image: url(${t});\n    background-position: ${-e*a}px ${-n*r}px;\n    background-size: ${100*o}% ${100*i}%;\n    transform: translate(0, 0);\n    user-select: none;\n  `,s};let o=!1;const i=(t,e,n,o)=>((t-n)**2+(e-o)**2)**.5,a=(t,e,n)=>{const o=t.getBoundingClientRect();return e>=o.left&&e<=o.right&&n>=o.top&&n<=o.bottom},r=document.querySelector(".game"),s=document.querySelector(".game__area"),d=document.querySelector(".game__bag");let h=1;if(null===r||null===s||null===d)throw Error("No game area found");s.style.width="360px",s.style.height="200px";const l=new Array;for(let t=0;t<2;t++)for(let e=0;e<3;e++){const o=n("https://picsum.photos/360/200",120,100,3,2,e,t);l.push(o),r.append(o)}const c=t=>{d.classList.toggle("game__bag--active",a(d,t.x,t.y)),t.target instanceof HTMLDivElement&&"piece"in t.target.dataset&&e(t.target,t.x,t.y)},g=t=>{if(r.removeEventListener("pointermove",c),r.removeEventListener("pointerup",g),d.classList.remove("game__bag--active"),!(t.target instanceof HTMLDivElement&&"piece"in t.target.dataset))return;const n=t.target;n.dataset.offsetX="0",n.dataset.offsetY="0",a(d,t.x,t.y)&&(n.hidden=!0);const h=s.getBoundingClientRect(),f=n.getBoundingClientRect(),p=f.left-h.left+f.width/2,u=f.top-h.top+f.height/2,m=Math.round(h.width/f.width),v=Math.round(h.height/f.height),w=Math.floor(p/h.width*m),x=Math.floor(u/h.height*v);var y;w>=0&&w<m&&x>=0&&x<v&&i(w*f.width+f.width/2,x*f.height+f.height/2,p,u)<.15*i(f.left,f.top,f.right,f.bottom)?(n.dataset.correct=l[x*m+w]===n?"true":"false",e(n,h.left+w*f.width,h.top+x*f.height),y=l,!o&&y.every((t=>"true"===t.dataset.correct))&&(o=!0,alert("Pobeda"))):n.dataset.correct="false"};r.addEventListener("pointerdown",(t=>{let n,o=t.offsetX,i=t.offsetY;if(t.target instanceof HTMLDivElement&&"piece"in t.target.dataset)n=t.target;else if(a(d,t.x,t.y)){const t=l.filter((t=>t.hidden)).sort((()=>Math.random()-.5)).pop();void 0!==t&&(n=t,o=t.clientWidth/2,i=t.clientHeight/2)}void 0!==n&&(n.hidden=!1,n.dataset.offsetX=`${o}`,n.dataset.offsetY=`${i}`,n.style.zIndex=""+h++,n.setPointerCapture(t.pointerId),e(n,t.x,t.y),r.addEventListener("pointermove",c),r.addEventListener("pointerup",g))}));
//# sourceMappingURL=index.d0ccefaa.js.map
